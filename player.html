<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>player</title>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="player.css">
  </head>
  <body>

<div id="piece_sequence"> </div>
<div id="piece_bank"> </div>

<script type="text/javascript">
const NUM_PIECES = 4;
const LENGTH_SEQUENCE = 8;

function allowDrop(ev) {
  ev.preventDefault();
}

function drag(ev) {
  ev.dataTransfer.setData("text", ev.target.id);
}

function drop(ev) {
  ev.preventDefault();
  var data = ev.dataTransfer.getData("text");
  ev.target.appendChild(document.getElementById(data));
}

for(var j = 0; j < NUM_PIECES; j++) {
  let imgTag = $("<img draggable='true' ondragstart='drag(event)'/>");
  imgTag.attr("id", "piece"+j);
  imgTag.attr("src", "piece_pics/piece" + j + ".png");
  imgTag.attr("width", 100/NUM_PIECES + "%");
  $("#piece_bank").append(imgTag);
}

for (var i = 0; i < LENGTH_SEQUENCE; i++) {
  let slotTag = $("<div ondrop='drop(event)' ondragover='allowDrop(event)'></div>");
  slotTag.attr("id", "slot"+i);
  slotTag.attr("class", "draggydiv");
  slotTag.width(100/LENGTH_SEQUENCE + "%");
  $("#piece_sequence").append(slotTag);
}

function submit_form(){
  // TODO: fix this
  let user_seq = "11111111";
  /*
  for (var i = 0; i < LENGTH_SEQUENCE; i++) {
    user_seq += $(`input[name='inputrow${i}']:checked`).val();
  }
  */
  window.location.href = "computer.html?seq="+user_seq;
}

</script>

<br>
<br>
<br>
<button onclick="submit_form()" class="btn">PLAY</button>

  </body>
</html>
